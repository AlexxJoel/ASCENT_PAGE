---
import { getCollection } from 'astro:content';
import ServiceLayout from '../../layouts/ServiceLayout.astro';
import { slugify } from '../../utils/helpers';

export async function getStaticPaths() {
    const services = await getCollection('services');
    return services.map(service => ({
        params: { slug: slugify(service.data.title) },
        props: { service }
    }));
}

const { service } = Astro.props;
const { Content } = await service.render();
---

<ServiceLayout 
    title={service.data.title} 
    description={service.data.description}
    icon={service.data.icon}
>
    <Content />
</ServiceLayout>